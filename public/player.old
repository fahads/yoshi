var depressed, fade, intervals, resetTime, scale, sound;

scale = ['A2', 'Bb2', 'B2', 'C3', 'Db3', 'D3', 'Eb3', 'E3', 'F3', 'Gb3', 'G3', 'Ab3', 'A3', 'Bb3', 'B3', 'C4', 'Db4', 'D4', 'Eb4', 'E4', 'F4', 'Gb4', 'G4', 'Ab4', 'A4', 'Bb4', 'B4', 'C5'];

intervals = {};

depressed = {};

sound = function(id) {
  return document.getElementById('sound-' + id);
};

fade = function(key) {
  var audio, stepfade;
  audio = sound(key);
  stepfade = function() {
    if (audio) {
      if (audio.volume > 0.2) {
        return audio.volume = audio.volume * 0.95;
      } else {
        return audio.volume = audio.volume - 0.01;
      }
    }
  };
  return function() {
    clearInterval(intervals[key]);
    return intervals[key] = setInterval(stepfade, 5);
  };
};

resetTime = function(audio) {
  var e;
  try {
    return audio.currentTime = 0;
  } catch (_error) {
    e = _error;
    return true;
  }
};

window.player = function(key) {
  var audio, pause;
  audio = sound(key);
  clearTimeout(depressed[key]);
  if (audio) {
    audio.pause();
    audio.volume = 1.0;
    if (audio.readyState >= 2 || audio.readyState === 0) {
      resetTime(audio);
      audio.play();
    }
    fade(key);
    pause = function() {
      audio.pause();
      return resetTime(audio);
    };
    return depressed[key] = setTimeout(pause, 1000);
  }
};

// ---
// generated by coffee-script 1.9.2